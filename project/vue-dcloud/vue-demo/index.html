<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>vue demo</title>
  <script src="vue.js"></script>
</head>
<body>
  <!-- 1. 安装与部署 -->

  <!-- 2. 创建第一个 vue 应用 -->
  <div id="app2">{{ message }} {{ name }}</div>
  <script>
    let app2 = new Vue({
      el: '#app2',
      data: {
        message: 'Hello world',
        name: 'Vue',
      },
    });
  </script>

  <!-- 3. 数据与方法 -->
  <div id="app3">
    {{ a }} 
    | {{ b }} <!-- [Vue warn] -->
    | {{ c }} 
    | {{ d }}
  </div>
  <script>
    let data = { 
      a: 1,
      c: 1,
      d: 1,
    };
    // Object.freeze(data); // TypeError
    let vm3 = new Vue({
      el: '#app3',
      data: data,
    });
    console.log(data.a === vm3.a); // true
    // 设置实例属性、数据源属性会影响到原始数据
    vm3.a = 2;
    console.log(data.a); // 2
    data.a = 3;
    console.log(vm3.a); // 3
    
    // 只有当实例创建时 data 中的属性才是响应式的
    vm3.b = 'vm3.b'; // [Vue warn] vm3.b
    data.b = 'data.b'; // [Vue warn]
    console.log(vm3.b); // vm3.b
    console.log(data.b); // data.b
    
    // Object.freeze() 阻止对象属性变化
    // Object.freeze(data);
    vm3.c = 2;
    
    // 实例属性、方法 前缀 $
    // 数据
    console.log(vm3.$data === data); // true
    // 元素
    console.log(vm3.$el === document.getElementById('app3')); // true
    // 观察
    vm3.$watch('d', function (newVal, oldVal) {
      console.log(`$watch d, newVal: ${newVal}, oldVal: ${oldVal}`); // $watch d, newVal: 2, oldVal: 1
    });
    vm3.$data.d = 2;
  </script>
  
  <!-- 4. 生命周期 -->
  <div id="app4">{{ a }}</div>
  <script>
    let vm4 = new Vue({
      el: '#app4',
      data: {
        a: 1,
      },
      beforeCreate: function () {
        console.log('beforeCreate');
      },
      created: function () {
        console.log('created');
      },
      beforeMount: function () {
        console.log('beforeMount');
      },
      mounted: function () {
        console.log('mounted');
      },
      beforeUpdate: function () {
        console.log('beforeUpdate');
      },
      updated: function () {
        console.log('updated');
      },
      beforeDestroy: function () {
        console.log('beforeDestroy');
      },
      destroyed: function () {
        console.log('destroyed');
      },
    });
    setTimeout(function () {
      vm4.a = 2;
    }, 2000);
  </script>
</body>
</html>